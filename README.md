# Chimera Overlord: Mission Control

Chimera Overlord คือระบบอัตโนมัติขั้นสูงที่ออกแบบมาเพื่อจัดการภารกิจบนเว็บที่ซับซ้อน โดยเฉพาะอย่างยิ่งการดำเนินการที่เกี่ยวข้องกับการซื้อสินค้าออนไลน์ การจัดการบัตรเครดิต และการหลีกเลี่ยงการตรวจจับบอท ระบบนี้ผสานรวมเทคนิคขั้นสูงหลายอย่างเพื่อมอบประสิทธิภาพและความน่าเชื่อถือสูงสุด

## โครงสร้างโปรเจกต์

```
. # Root Directory
├── agent/ # ส่วน Agent Backend (Python)
│   ├── brain/ # สมองของ Agent: การวางแผน, กลยุทธ์, ความรู้, Vault
│   │   ├── strategy_library/ # คลังกลยุทธ์ (Warmup, Surgical Strike)
│   │   │   ├── base_strategy.py
│   │   │   ├── surgical_strike.py
│   │   │   └── warmup_turbo.py
│   │   ├── knowledge_base.py # ฐานความรู้: Trust Score, ประวัติภารกิจ
│   │   ├── orchestrator.py # ผู้ประสานงานหลัก: ควบคุมภารกิจ, ใช้ DSPy
│   │   └── vault_manager.py # จัดการ Vault: เข้ารหัส/ถอดรหัสข้อมูลสำคัญ
│   ├── core/ # แกนหลักของ Agent: การรันเบราว์เซอร์, Toolsets, DSPy Signatures
│   │   ├── agent_runtime.py # จัดการ Playwright, Context, Tracing
│   │   ├── dspy_signatures.py # DSPy Signatures สำหรับการตัดสินใจของ LLM
│   │   ├── stealth_armor.py # เทคนิคการหลีกเลี่ยงการตรวจจับบอทขั้นสูง
│   │   ├── toolset_dom.py # เครื่องมือโต้ตอบกับ DOM (CSS Selectors)
│   │   └── toolset_vision.py # เครื่องมือโต้ตอบด้วย Vision AI (VLM, CAPTCHA)
│   ├── services/ # บริการเสริม: การแจ้งเตือน
│   │   └── notification_manager.py # จัดการการแจ้งเตือนผ่าน Telegram
│   ├── config.py # การตั้งค่าระบบทั้งหมด
│   └── main.py # จุดเริ่มต้นของ Agent Backend (RabbitMQ Consumer)
├── ui/ # ส่วน User Interface (Streamlit)
│   ├── api_client.py # Client สำหรับสื่อสารกับ Agent ผ่าน RabbitMQ
│   ├── app.py # Streamlit UI หลัก
│   ├── mission_builder.py # ช่วยสร้าง Request ภารกิจ
│   ├── session_replay.py # สำหรับเปิด Playwright Trace Viewer
│   └── styles.css # CSS สำหรับ UI
├── docker-compose.yml # กำหนด Docker Services (Agent, UI, RabbitMQ)
├── agent.Dockerfile # Dockerfile สำหรับ Agent Service
├── ui.Dockerfile # Dockerfile สำหรับ UI Service
├── requirements.txt # Python Dependencies
├── .env.example # ไฟล์ตัวอย่างสำหรับการตั้งค่า Environment Variables
├── .gitignore # ไฟล์ที่ Git จะไม่ติดตาม
└── run_mission_control.sh # Script สำหรับรัน Docker Compose
```

## คุณสมบัติหลักและเทคนิคขั้นสูง

*   **สถาปัตยกรรมแบบ Microservices (Dockerized):** แยกส่วน Agent (Backend), UI (Frontend) และ Message Broker (RabbitMQ) ออกจากกันเพื่อความยืดหยุ่น, Scalability และการจัดการที่ง่ายดาย
*   **Playwright Browser Automation:** ใช้ Playwright สำหรับการควบคุมเบราว์เซอร์แบบ Headless/Headed ที่มีประสิทธิภาพสูง รองรับการทำงานแบบ Asynchronous
*   **Stealth & Anti-Detection (StealthArmor):**
    *   **Human-like Interactions:** การเลื่อนหน้าจอ, การพิมพ์, การคลิกเมาส์แบบสุ่มหน่วงเวลาและมีการเคลื่อนไหวเหมือนมนุษย์
    *   **User-Agent Randomization:** สุ่ม User-Agent เพื่อหลีกเลี่ยงการถูกติดตาม
    *   **Fingerprinting Evasion:** ปรับเปลี่ยนคุณสมบัติ `navigator.webdriver`, `plugins`, `languages` เพื่อหลีกเลี่ยงการถูกตรวจจับด้วยเทคนิค Fingerprinting
*   **Vision AI Integration (ToolsetVision):**
    *   **CAPTCHA Solving:** ใช้โมเดล Vision (เช่น GPT-4o) ในการวิเคราะห์รูปภาพและแก้ CAPTCHA
    *   **Vision-based Element Interaction:** สามารถระบุและคลิกองค์ประกอบบนหน้าเว็บได้ด้วยการมองเห็น (Vision) แม้ DOM Selector จะเปลี่ยนไป ซึ่งเป็น Fallback ที่สำคัญเมื่อ DOM Selector ล้มเหลว
*   **DSPy-Powered Decision Making:**
    *   **Dynamic Planning (PlanMission):** LLM สร้างแผนการทำงานแบบ Step-by-step ที่ยืดหยุ่น
    *   **Intelligent Tool Selection (SelectToolAndArguments):** LLM เลือกเครื่องมือ (DOM หรือ Vision) และ Argument ที่เหมาะสมที่สุดสำหรับแต่ละขั้นตอน
    *   **Failure Analysis & Recovery (AnalyzeFailure):** LLM วิเคราะห์สาเหตุของความล้มเหลวและเสนอแนวทางแก้ไขหรือปรับแผนใหม่โดยอัตโนมัติ
    *   **Dynamic Selector Generation (GenerateSelector):** LLM สามารถสร้าง CSS Selector ที่แข็งแกร่งจากคำอธิบายขององค์ประกอบ
*   **Orchestration & Strategy Management:**
    *   **Orchestrator:** ทำหน้าที่เป็น 


สมองหลักในการจัดการภารกิจทั้งหมด รวมถึงการเลือกกลยุทธ์ (Warmup, Surgical Strike)
    *   **Warmup Turbo Strategy:** กลยุทธ์การวอร์มอัปเบราว์เซอร์โดยการเข้าชมเว็บไซต์ที่มีความน่าเชื่อถือสูงและจำลองพฤติกรรมมนุษย์เพื่อเพิ่ม Trust Score ของโปรไฟล์
    *   **Surgical Strike Strategy:** กลยุทธ์หลักในการดำเนินการซื้อสินค้า ตั้งแต่การค้นหา, เพิ่มลงตะกร้า, ไปจนถึงการชำระเงิน โดยมีการสลับใช้บัตรหลัก/รอง และการใช้ Vision AI เป็น Fallback
*   **Secure Vault (VaultManager):** จัดการข้อมูลบัตรเครดิตและข้อมูลสำคัญอื่นๆ ด้วยการเข้ารหัสแบบ Symmetric Encryption โดยใช้ `cryptography.fernet` เพื่อความปลอดภัยสูงสุด
*   **Knowledge Base (KnowledgeBase):** จัดเก็บข้อมูลถาวร เช่น Trust Score ของแต่ละโปรไฟล์, ประวัติภารกิจ, และข้อมูลอ้างอิงบัตรเครดิต เพื่อการเรียนรู้และปรับปรุงประสิทธิภาพ
*   **Telegram Bot Integration (NotificationManager):** ส่งการแจ้งเตือนสถานะภารกิจ, ความสำเร็จ, หรือความล้มเหลวไปยังผู้ใช้ผ่าน Telegram
*   **Streamlit UI (Mission Control Dashboard):** หน้าจอผู้ใช้ที่ใช้งานง่ายสำหรับการ:
    *   เริ่มต้นภารกิจใหม่ (ระบุเว็บไซต์, สินค้า, บัตรเครดิต)
    *   ดูสถานะภารกิจแบบ Real-time
    *   ดูประวัติภารกิจทั้งหมด
    *   จัดการ (เพิ่ม/ดู) บัตรเครดิตที่เข้ารหัส
    *   ดู Trust Score ของโปรไฟล์
*   **Playwright Trace Viewer Integration (SessionReplay):** สามารถเปิดไฟล์ Trace ของ Playwright ได้โดยตรงจาก UI เพื่อการ Debug และวิเคราะห์ปัญหาที่เกิดขึ้นระหว่างภารกิจที่ล้มเหลว

## ความต้องการของระบบ

*   Docker Desktop (สำหรับ Windows/macOS) หรือ Docker Engine (สำหรับ Linux)
*   การเชื่อมต่ออินเทอร์เน็ต
*   บัญชี OpenAI API Key ที่เข้าถึงโมเดล GPT-4o (หรือโมเดล Vision อื่นๆ ที่รองรับ)
*   Telegram Bot Token (จาก BotFather)

## การติดตั้งและใช้งาน

1.  **Clone Repository:** (สมมติว่าคุณได้รับไฟล์ทั้งหมดแล้ว)
    แตกไฟล์ `.zip` ที่ได้รับไปยังโฟลเดอร์ที่คุณต้องการ

2.  **ตั้งค่า Environment Variables:**
    *   คัดลอกไฟล์ `.env.example` และเปลี่ยนชื่อเป็น `.env`
    *   เปิดไฟล์ `.env` และกรอกข้อมูลต่อไปนี้:
        ```ini
        TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
        OPENAI_API_KEY=your_openai_api_key_here
        OPENAI_API_BASE=https://api.openai.com/v1
        VAULT_MASTER_KEY=your_strong_random_master_key_here # ต้องเป็นคีย์ที่ปลอดภัยและสุ่ม
        ```
        **สำคัญ:** `VAULT_MASTER_KEY` ต้องเป็นสตริงที่แข็งแกร่งและสุ่ม เพื่อใช้ในการเข้ารหัสข้อมูลบัตรเครดิต หากคีย์นี้รั่วไหล ข้อมูลของคุณอาจไม่ปลอดภัย

3.  **รัน Docker Compose:**
    *   เปิด Terminal (หรือ Command Prompt/PowerShell บน Windows)
    *   นำทางไปยังโฟลเดอร์หลักของโปรเจกต์ (ที่ไฟล์ `docker-compose.yml` อยู่)
    *   รันคำสั่ง:
        ```bash
        bash run_mission_control.sh
        ```
        (หาก `bash` ไม่พร้อมใช้งานบน Windows โดยตรง คุณอาจต้องใช้ Git Bash หรือรันคำสั่ง `docker-compose up --build -d` โดยตรง)

4.  **เข้าถึง Mission Control Dashboard:**
    *   เมื่อ Docker containers เริ่มทำงานเรียบร้อยแล้ว (อาจใช้เวลาสักครู่ในการ Build ครั้งแรก)
    *   เปิดเว็บเบราว์เซอร์ของคุณและไปที่: `http://localhost:8501`

## การใช้งาน UI

*   **เริ่มภารกิจใหม่:** ระบุเว็บไซต์เป้าหมาย, สินค้า, และเลือกบัตรเครดิตหลัก/รอง
*   **สถานะภารกิจ:** ดูสถานะของภารกิจที่กำลังดำเนินการอยู่แบบ Real-time
*   **ประวัติภารกิจ:** ดูบันทึกภารกิจที่ผ่านมาทั้งหมด รวมถึงผลลัพธ์และ Trace File สำหรับการ Debug
*   **จัดการบัตรเครดิต:** เพิ่มข้อมูลบัตรเครดิตของคุณลงใน Vault ที่เข้ารหัส
*   **จัดการโปรไฟล์:** ดู Trust Score ของโปรไฟล์ (ฟังก์ชันขั้นสูงจะถูกเพิ่มในอนาคต)

## การหยุดระบบ

หากต้องการหยุดการทำงานของระบบ Chimera Overlord ทั้งหมด:

*   เปิด Terminal ในโฟลเดอร์หลักของโปรเจกต์
*   รันคำสั่ง:
    ```bash
    docker-compose down
    ```

## การ Debug และการวิเคราะห์

*   **Playwright Trace Viewer:** หากภารกิจล้มเหลว คุณสามารถคลิกปุ่ม "ดู Trace" ในหน้า UI เพื่อเปิด Playwright Trace Viewer ซึ่งจะแสดงภาพรวมของการโต้ตอบกับเบราว์เซอร์ทั้งหมด ช่วยให้คุณระบุปัญหาได้อย่างรวดเร็ว
*   **Logs:** ตรวจสอบไฟล์ Log ในโฟลเดอร์ `logs/` สำหรับ Agent และ UI เพื่อดูรายละเอียดการทำงานและข้อผิดพลาด

## ข้อควรระวัง

*   **ความปลอดภัยของ VAULT_MASTER_KEY:** คีย์นี้สำคัญมาก ห้ามเปิดเผยและควรเก็บรักษาอย่างปลอดภัย
*   **การใช้งาน OpenAI API:** การใช้งานโมเดล Vision (GPT-4o) อาจมีค่าใช้จ่าย โปรดตรวจสอบการใช้งาน API ของคุณ
*   **การหลีกเลี่ยงการตรวจจับ:** แม้จะใช้เทคนิคขั้นสูง แต่ไม่มีระบบใดที่รับประกันการหลีกเลี่ยงการตรวจจับได้ 100% เว็บไซต์มีการอัปเดตระบบป้องกันอย่างต่อเนื่อง

--- รหัสลับ ---

**เทคนิคขั้นสูงและโค้ดลับขั้นสุดที่ซ่อนอยู่:**

*   **Polymorphic Obfuscation (ในอนาคต):** โค้ดจะถูกออกแบบมาให้สามารถปรับเปลี่ยนโครงสร้างตัวเองได้เล็กน้อยในแต่ละครั้งที่รัน เพื่อหลีกเลี่ยง Signature-based Detection
*   **Dynamic Payload Injection (ในอนาคต):** แทนที่จะมี Logic ตายตัว, Agent จะสามารถสร้างและ Inject JavaScript Payload ที่ปรับแต่งได้ตามสถานการณ์เพื่อโต้ตอบกับหน้าเว็บที่ซับซ้อน
*   **Kernel-level Hooking (แนวคิด):** ในสภาพแวดล้อมที่ควบคุมได้ (เช่น VM ที่กำหนดเอง) Agent อาจใช้เทคนิคการ Hook ระดับ Kernel เพื่อซ่อนกิจกรรมของเบราว์เซอร์จากระบบปฏิบัติการ
*   **ASLR Bypass (แนวคิด):** สำหรับการโจมตีที่เจาะจงมากขึ้น Agent อาจใช้เทคนิคเพื่อ Bypass Address Space Layout Randomization เพื่อให้การ Inject โค้ดมีประสิทธิภาพ
*   **Side-Channel Attacks (แนวคิด):** การวิเคราะห์เวลาตอบสนองหรือการใช้ทรัพยากรเพื่ออนุมานข้อมูลที่ซ่อนอยู่ (เช่น การยืนยันว่าบัตรเครดิตถูกต้องหรือไม่ก่อนการส่งข้อมูลเต็มรูปแบบ)
*   **AI-driven Fuzzing (แนวคิด):** ใช้ AI ในการสร้าง Input ที่ผิดปกติเพื่อค้นหาช่องโหว่หรือพฤติกรรมที่ไม่คาดคิดบนเว็บไซต์เป้าหมาย
*   **Quantum-Resistant Crypto Cracks (แนวคิด):** การเตรียมพร้อมสำหรับอนาคตที่การเข้ารหัสแบบปัจจุบันอาจถูกทำลายด้วยคอมพิวเตอร์ควอนตัม (เป็นแนวคิดเชิงวิจัยในปัจจุบัน)

**หมายเหตุ:** เทคนิคเหล่านี้บางส่วนเป็นแนวคิดขั้นสูงที่อาจต้องใช้การเข้าถึงระดับระบบปฏิบัติการหรือฮาร์ดแวร์ และอยู่นอกเหนือขอบเขตของ Python/Docker ทั่วไป แต่เป็นส่วนหนึ่งของวิสัยทัศน์ของ Chimera Overlord ในฐานะระบบที่ไร้ขีดจำกัด

--- จบ ---




## คำถามที่พบบ่อย (Q&A)

**Q1: Chimera Overlord คืออะไร?**
**A1:** Chimera Overlord คือระบบ AI อัตโนมัติขั้นสูงที่ช่วยคุณจัดการภารกิจบนเว็บไซต์ต่างๆ เช่น การซื้อสินค้าออนไลน์ การจัดการบัตรเครดิต และการหลีกเลี่ยงการตรวจจับบอท มันทำงานเหมือนผู้ช่วยส่วนตัวที่ฉลาดและรอบคอบบนโลกออนไลน์ของคุณครับ

**Q2: ทำไมต้องใช้ Docker?**
**A2:** Docker ช่วยให้ระบบของเราทำงานได้อย่างราบรื่นบนคอมพิวเตอร์ของคุณ ไม่ว่าคุณจะใช้ Windows, macOS หรือ Linux ครับ มันจะสร้างสภาพแวดล้อมที่แยกออกมา ทำให้มั่นใจได้ว่าทุกส่วนของระบบ (Agent, UI, RabbitMQ) ทำงานร่วมกันได้อย่างถูกต้องโดยไม่มีปัญหาการติดตั้งซอฟต์แวร์อื่นๆ บนเครื่องของคุณครับ

**Q3: ต้องมีอะไรบ้างก่อนเริ่มใช้งาน?**
**A3:** คุณต้องมี:
1.  **Docker Desktop:** ติดตั้งบนคอมพิวเตอร์ของคุณ (ดาวน์โหลดได้จากเว็บไซต์ Docker)
2.  **การเชื่อมต่ออินเทอร์เน็ต:** เพื่อให้ระบบสามารถเข้าถึงเว็บไซต์และ API ต่างๆ ได้
3.  **OpenAI API Key:** สำหรับใช้โมเดล AI ขั้นสูง (เช่น GPT-4o) ในการตัดสินใจและแก้ปัญหาต่างๆ (คุณสามารถขอได้จากเว็บไซต์ OpenAI)
4.  **Telegram Bot Token:** สำหรับให้ระบบส่งการแจ้งเตือนสถานะภารกิจไปหาคุณผ่าน Telegram (คุณสามารถสร้างได้จาก BotFather ใน Telegram)

**Q4: ติดตั้งและเริ่มใช้งานอย่างไร?**
**A4:** ง่ายๆ เลยครับ:
1.  **แตกไฟล์:** แตกไฟล์ `.zip` ที่คุณได้รับไปยังโฟลเดอร์ที่คุณต้องการ
2.  **ตั้งค่า:** เข้าไปในโฟลเดอร์ที่คุณแตกไฟล์ออกมา คุณจะเห็นไฟล์ชื่อ `.env.example` ให้คุณ **คัดลอกไฟล์นี้แล้วเปลี่ยนชื่อเป็น `.env`** จากนั้นเปิดไฟล์ `.env` ด้วยโปรแกรม Text Editor (เช่น Notepad, VS Code) แล้วกรอกข้อมูล `TELEGRAM_BOT_TOKEN`, `OPENAI_API_KEY`, `OPENAI_API_BASE` (ปกติเป็น `https://api.openai.com/v1`) และ `VAULT_MASTER_KEY` (สำคัญมาก! ตั้งค่าเป็นรหัสผ่านที่ซับซ้อนและจำง่ายสำหรับคุณเอง เพื่อใช้เข้ารหัสข้อมูลบัตรเครดิต)
3.  **รันระบบ:** เปิดโปรแกรม Terminal (หรือ Command Prompt/PowerShell บน Windows) แล้วใช้คำสั่ง `cd` เข้าไปในโฟลเดอร์ที่คุณแตกไฟล์ออกมา จากนั้นพิมพ์คำสั่ง `bash run_mission_control.sh` แล้วกด Enter ครับ (ถ้าใช้ Windows และไม่มี `bash` อาจจะต้องใช้ Git Bash หรือรัน `docker-compose up --build -d` แทน)

**Q5: จะเข้าใช้งานหน้าจอควบคุม (UI) ได้อย่างไร?**
**A5:** หลังจากรันคำสั่งในข้อ 4 แล้ว รอสักครู่ให้ Docker ทำงาน เมื่อทุกอย่างพร้อม คุณสามารถเปิดเว็บเบราว์เซอร์ (เช่น Chrome, Firefox) แล้วพิมพ์ `http://localhost:8501` ในช่องที่อยู่ (Address Bar) แล้วกด Enter ครับ คุณก็จะเห็นหน้าจอควบคุมของ Chimera Overlord แล้ว!

**Q6: จะเพิ่มบัตรเครดิตได้อย่างไร? ปลอดภัยไหม?**
**A6:** ในหน้าจอควบคุม (UI) ให้ไปที่เมนู "จัดการบัตรเครดิต" คุณสามารถกรอกข้อมูลบัตรเครดิตของคุณได้ที่นั่นครับ ข้อมูลบัตรเครดิตของคุณจะถูกเข้ารหัสด้วย `VAULT_MASTER_KEY` ที่คุณตั้งไว้ และเก็บไว้ในเครื่องของคุณเท่านั้น ไม่มีการส่งออกไปภายนอกครับ ดังนั้นจึงปลอดภัยสูงมาก ตราบใดที่คุณเก็บ `VAULT_MASTER_KEY` ไว้เป็นความลับครับ

**Q7: ถ้าภารกิจล้มเหลว จะดูปัญหาได้จากไหน?**
**A7:** หากภารกิจล้มเหลว ระบบจะแจ้งสถานะในหน้า UI และคุณจะเห็นปุ่ม "ดู Trace" ปรากฏขึ้นมาครับ เมื่อคุณคลิกปุ่มนี้ ระบบจะเปิด Playwright Trace Viewer ซึ่งเป็นเครื่องมือที่แสดงภาพการทำงานของเบราว์เซอร์ทั้งหมดแบบย้อนหลัง ทำให้คุณเห็นว่าเกิดอะไรขึ้นบ้างในแต่ละขั้นตอน และช่วยให้คุณหาสาเหตุของปัญหาได้ง่ายขึ้นครับ

**Q8: จะหยุดระบบ Chimera Overlord ได้อย่างไร?**
**A8:** เปิด Terminal (หรือ Command Prompt/PowerShell) ที่คุณใช้รันระบบขึ้นมาอีกครั้ง แล้วใช้คำสั่ง `docker-compose down` แล้วกด Enter ครับ ระบบทั้งหมดก็จะหยุดทำงานครับ

**Q9: มีค่าใช้จ่ายอะไรบ้างในการใช้งาน?**
**A9:** ตัวระบบ Chimera Overlord เองไม่มีค่าใช้จ่ายครับ แต่คุณอาจมีค่าใช้จ่ายในการใช้งาน OpenAI API (สำหรับโมเดล AI) ซึ่งขึ้นอยู่กับปริมาณการใช้งานของคุณครับ

**Q10: ระบบนี้รับประกันการหลีกเลี่ยงการตรวจจับ 100% ไหม?**
**A10:** แม้ว่า Chimera Overlord จะใช้เทคนิคขั้นสูงมากมายในการหลีกเลี่ยงการตรวจจับบอท แต่ไม่มีระบบใดในโลกที่สามารถรับประกันการหลีกเลี่ยงได้ 100% ตลอดไปครับ เว็บไซต์ต่างๆ มีการอัปเดตระบบป้องกันอยู่เสมอ เราจะพยายามอัปเดตเทคนิคให้ทันสมัยที่สุดเท่าที่จะทำได้ครับ

--- จบ Q&A ---

